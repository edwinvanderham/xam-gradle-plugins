apply plugin : 'xamarin-nuget-plugin'
apply plugin : 'xamarin-build-lib-plugin'
apply plugin : 'xamarin-nunit-plugin'
apply plugin : 'xamarin-nuget-package-plugin'

version = "1.0.0"
name = "Xam.ACME.CrossLib"

xamarin {
    configuration 'Release'
    solution 'CrossLib.sln'
}

nupsec {
    authors "John Doe"
    owners "ACME"
    description "Sample CrossLib build with gradle"

    dependencies {
        dependency "Xamarin.Forms:[1.4.3,)"
    }

    assemblies {
        target {
            dest "lib/portable-net45+wp8+wpa81+win8+MonoAndroid10+MonoTouch10+Xamarin.iOS10"
            includes ["Xam.ACME.CrossLib.dll"]
        }

        target {
            dest "lib/MonoAndroid10"
            includes ["Xam.ACME.CrossLib.dll",
                     "Xam.ACME.CrossLib.Droid.dll",
                     "Xam.ACME.CrossLib.Binding.Droid.dll"]
        }

        target {
            dest "lib/Xamarin.iOS10"
            includes ["Xam.ACME.CrossLib.dll",
                     "Xam.ACME.CrossLib.IOS.dll",
                     "Xam.ACME.CrossLib.Binding.IOS.dll"]
        }
    }
}

nugetPublisher {
    repositories {
        maven {
            apiKey 'abcdefghijklmnopqrstuvwxyz'
            url 'http://localhost:8080/nexus/content/groups/public'
        }
    }
}

nunit {
    version '2.6'
    assemblies ['Xam.ACME.CrossLib.Test.dll']
}